---
apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Release.Name }}-replicator
  labels:
    cloudops/iaac/replicator: v1
    app.kubernetes.io/name: {{ include "chart.name" . }}
    app.kubernetes.io/instance: {{ .Release.Name }}
    helm.sh/chart: {{ include "chart.chart" . }}
    {{- if .Chart.AppVersion }}
    app.kubernetes.io/version: {{ .Chart.AppVersion | quote }}
    {{- end }}
    app.kubernetes.io/managed-by: {{ .Release.Service }}
    {{- end }}
data:
  octopus_space: $env:SPACE_NAME
  octopus_project: $env:PROJECT_NAME
  github_repository: $env:GITHUB_REPOSITORY
  github_user: $env:GITHUB_ACTOR
  release_version: $env:VERSION
  image_name: $env:IMAGE_NAME